---

title: NumPy Array Indexing and Selection
sidebar_label: NumPy Array Indexing and Selection
sidebar_position: 14
--------------------

## Introduction

In this lecture, we’ll learn **how to access, modify, and filter data in NumPy arrays** using indexing, slicing, broadcasting, and conditional selection.
NumPy’s array indexing is extremely powerful — it allows **element-wise access** and **vectorized selection**, much faster than traditional Python lists.

Before diving deeper, recall that:

* **Indexing** helps us access individual elements or groups of elements.
* **Slicing** allows extracting subarrays.
* **Broadcasting** lets us assign a single value to multiple elements at once.
* **Conditional selection** allows filtering based on Boolean conditions.

---

## 1. Creating and Indexing a NumPy Array

Let’s start with a simple 1D NumPy array using `np.arange()`:

```python
import numpy as np
arr = np.arange(0, 11)
print(arr)
```

**Output:**

```
array([ 0,  1,  2,  3,  4,  5,  6,  7,  8,  9, 10])
```

### Accessing Single Elements

Use **square brackets** `[ ]` with the element’s index:

```python
arr[8]
# Output: 8
```

---

### Slicing (Range Selection)

Use the syntax `arr[start:stop]` where the stop index is **exclusive**.

```python
arr[1:5]   # Elements from index 1 to 4
arr[:6]    # From start to index 5
arr[5:]    # From index 5 to the end
```

---

## 2. Broadcasting

Unlike Python lists, NumPy arrays support **broadcasting**, which means you can
assign a single value to multiple elements at once.

```python
arr[:5] = 100
print(arr)
# Output: [100 100 100 100 100   5   6   7   8   9  10]
```

You just replaced the first five elements with 100. To reset, simply recreate
the array:

```python
arr = np.arange(0, 11)
```

---

## 3. Slices Are Views, Not Copies

In NumPy, **slices reference the original array**, not a new copy. So, modifying
the slice modifies the original array.

```python
slice_of_arr = arr[:6]
slice_of_arr[:] = 99
print(arr)
# Output: [99 99 99 99 99 99  6  7  8  9 10]
```

To prevent this and create an independent copy, use `.copy()`:

```python
arr = np.arange(0, 11)
arr_copy = arr.copy()
arr_copy[:] = 100
print(arr)      # Original unaffected
print(arr_copy) # Copy modified
```

---

## 4. Indexing 2D Arrays (Matrices)

To create a 2D array, use a list of lists:

```python
arr_2d = np.array([[5,10,15],
                   [20,25,30],
                   [35,40,45]])
```

**Accessing elements:**

### Using Double Brackets:

```python
arr_2d[0][0]  # 5
arr_2d[1][1]  # 25
arr_2d[2][1]  # 40
```

### Using Single Bracket with Comma (Recommended):

```python
arr_2d[1,2]   # 30
```

This notation is cleaner and faster, and it avoids indexing confusion.

---

## 5. Slicing Submatrices

You can extract parts of 2D arrays (submatrices) using slice notation.

```python
arr_2d[:2, 1:]
```

**Explanation:**

- `:2` → rows 0 and 1
- `1:` → columns starting from index 1

**Output:**

```
array([[10, 15],
       [25, 30]])
```

Try experimenting with different slice combinations to grab different
subsections of a matrix.

---

## 6. Conditional Selection

Conditional selection lets you **filter arrays** based on logical conditions.

```python
arr = np.arange(1, 11)
bool_arr = arr > 5
print(bool_arr)
# Output: [False False False False False  True  True  True  True  True]
```

Now use this Boolean array as a mask:

```python
arr[bool_arr]
# Output: array([ 6,  7,  8,  9, 10])
```

You can do this in a single line:

```python
arr[arr > 5]
# Output: array([ 6,  7,  8,  9, 10])
```

Other examples:

```python
arr[arr < 3]   # [1, 2]
arr[arr % 2 == 0]  # even numbers
```

---

## 7. Practice: Slicing a 2D Array

Let’s create a 5×10 matrix:

```python
arr_2d = np.arange(50).reshape(5,10)
print(arr_2d)
```

**Output:**

```
[[ 0  1  2  3  4  5  6  7  8  9]
 [10 11 12 13 14 15 16 17 18 19]
 [20 21 22 23 24 25 26 27 28 29]
 [30 31 32 33 34 35 36 37 38 39]
 [40 41 42 43 44 45 46 47 48 49]]
```

Now extract a submatrix with elements `13, 14, 23, 24`:

```python
arr_2d[1:3, 3:5]
```

**Output:**

```
array([[13, 14],
       [23, 24]])
```

---

## 8. Summary of Key Methods

| Operation                      | Description             | Example                 |
| ------------------------------ | ----------------------- | ----------------------- |
| `arr[i]`                       | Access element by index | `arr[2]`                |
| `arr[start:stop]`              | Slice array             | `arr[1:5]`              |
| `arr[:5] = value`              | Broadcasting            | `arr[:3] = 0`           |
| `.copy()`                      | Create a copy           | `arr_copy = arr.copy()` |
| `arr_2d[row, col]`             | Access 2D element       | `arr_2d[2,1]`           |
| `arr_2d[start:end, start:end]` | Submatrix               | `arr_2d[:2,1:]`         |
| `arr[condition]`               | Conditional selection   | `arr[arr>5]`            |

---

## Advanced Examples

### Example 1 — Modify a Submatrix

```python
matrix = np.arange(1, 26).reshape(5,5)
print("Original:\n", matrix)

matrix[1:3, 1:3] = 0
print("\nAfter modification:\n", matrix)
```

**Explanation:** Replaces a 2×2 block in the center with zeros using slicing and
broadcasting.

---

### Example 2 — Conditional Selection with Multiple Conditions

```python
arr = np.arange(1, 11)
result = arr[(arr > 3) & (arr < 8)]
print(result)
# Output: [4 5 6 7]
```

> ⚠️ Note: Use `&` for AND and `|` for OR (not `and` / `or`).

---

### Example 3 — Filtering 2D Arrays

```python
arr_2d = np.arange(1, 13).reshape(3,4)
print(arr_2d[arr_2d % 2 == 0])
# Output: [ 2  4  6  8 10 12]
```

---

## Key Takeaways

- **Indexing and slicing** in NumPy are similar to Python lists but more
  powerful.
- **Broadcasting** allows assigning a single value to multiple elements.
- **Slices** are **views**, not copies — use `.copy()` if independence is
  needed.
- **2D array indexing** uses `[row, column]` format.
- **Conditional selection** enables efficient filtering of elements using
  Boolean masks.

---

## Practice Questions

1. Create an array of numbers from 0 to 20 and extract all even numbers.
2. What happens when you modify a slice of a NumPy array?
3. Write code to extract the 2×2 submatrix from this array:

   ```python
   arr = np.arange(16).reshape(4,4)
   ```

   Expected output:

   ```
   [[5, 6],
    [9,10]]
   ```

4. How do you reset a modified array to its original form?
5. How do you select all numbers greater than 15 from a 4×5 array?
6. What is the difference between `arr.copy()` and `arr[:]`?
7. How can you select the entire first column of a 2D array?
8. Explain the difference between `arr[1][2]` and `arr[1, 2]`.
9. Create a 5×5 array of random integers and set all diagonal elements to zero.
10. Using a condition, replace all numbers greater than 50 in an array with 50.

---

## Answers

1. `arr = np.arange(21); arr[arr % 2 == 0]`
2. It also modifies the original array since slices are views.
3. `arr[1:3, 1:3]`
4. Recreate it with `arr = np.arange(0, 11)` or `arr.copy()` backup.
5. `arr[arr > 15]`
6. `arr.copy()` creates a new array; `arr[:]` references the same data.
7. `arr[:, 0]`
8. Both return the same value, but `[1,2]` is more efficient and preferred.
9. ```python
   a = np.random.randint(1,100,(5,5))
   np.fill_diagonal(a, 0)
   ```
10.

```python
arr[arr > 50] = 50
```
