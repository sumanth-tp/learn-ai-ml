---

title: Matplotlib Part 2 — Subplots, Figure Control, and Legends
sidebar_label: Matplotlib Part 2
sidebar_position: 19
--------------------

## Introduction

In this part of the Matplotlib series, we’ll dive deeper into the **Object-Oriented (OO) interface**, which provides advanced control over figure composition.
You’ll learn to:

* Create **subplots** using `plt.subplots()`
* Manage **axes objects** in grids
* Adjust **figure size** and **DPI** (resolution)
* Save figures in multiple formats
* Add **titles**, **labels**, and **legends**

By mastering these, you’ll be able to produce publication-quality visualizations with precision and flexibility.

---

## 1. Creating Subplots with the Object-Oriented Method

Previously, we used `fig.add_axes()` to manually create axes inside a figure.
However, for structured layouts, **`plt.subplots()`** is the preferred way.

```python
fig, axes = plt.subplots()
axes.plot(x, y)
```

Here:

- `fig` is the **Figure** — the entire plotting window.
- `axes` is the **Axes object** (the actual area where the data is plotted).

If multiple subplots are created, `axes` becomes a **NumPy array of Axes
objects**.

---

## 2. Specifying Rows and Columns in Subplots

To create multiple subplots in a single figure, specify the number of rows and
columns using `nrows` and `ncols`.

### Example: 1 Row × 2 Columns

```python
fig, axes = plt.subplots(nrows=1, ncols=2)
```

This returns:

- One **Figure**
- Two **Axes** arranged horizontally

You can plot on each axis individually:

```python
axes[0].plot(x, y)
axes[1].plot(y, x)
```

---

## 3. Creating a Grid of Subplots

You can create a grid layout for more complex visualizations.

```python
fig, axes = plt.subplots(nrows=3, ncols=3)
plt.tight_layout()
```

- `nrows=3, ncols=3` creates 9 subplots (3×3 grid).
- `plt.tight_layout()` ensures proper spacing between subplots, preventing
  overlapping titles or labels.

---

### Working with the Axes Array

When multiple axes are created, they are stored in a NumPy array.

You can:

- **Index** into it directly:

  ```python
  axes[0, 0].plot(x, y)
  axes[2, 1].plot(y, x)
  ```

- **Iterate** over it:

  ```python
  for ax in axes.flat:
      ax.plot(x, y)
  ```

Each `ax` is an independent plotting area that can have its own labels, titles,
and styles.

---

### Example: Setting Titles Individually

```python
axes[0].plot(x, y)
axes[0].set_title('First Plot')

axes[1].plot(y, x)
axes[1].set_title('Second Plot')
plt.tight_layout()
```

✅ `plt.tight_layout()` is essential whenever you use multiple subplots.

---

## 4. Controlling Figure Size and DPI

### Figure Size (`figsize`)

Defines the **dimensions** of the figure in **inches**.

### DPI (Dots Per Inch)

Controls the **resolution** of the figure — higher DPI = higher quality.

---

### Example: Creating a Custom-Sized Figure

```python
fig = plt.figure(figsize=(3, 2), dpi=100)
ax = fig.add_axes([0.1, 0.1, 0.8, 0.8])
ax.plot(x, y)
```

- `figsize=(3, 2)` → 3 inches wide, 2 inches tall
- `dpi=100` → 100 pixels per inch → total size = 300 × 200 pixels

---

### Example: Larger Figure with Multiple Subplots

```python
fig, axes = plt.subplots(figsize=(8, 2), nrows=2, ncols=1)
axes[0].plot(x, y)
axes[1].plot(y, x)
plt.tight_layout()
```

- Two subplots stacked vertically (`nrows=2`)
- Wide aspect ratio (`figsize=(8, 2)`)

---

## 5. Saving Figures

Use `savefig()` to export figures to disk in different formats like **PNG**,
**JPEG**, **PDF**, or **SVG**.

```python
fig.savefig('my_picture.png')
fig.savefig('my_picture.png', dpi=200)
```

The optional `dpi` parameter allows saving at higher resolution for print or
publication quality.

**Supported formats include:** `.png`, `.jpg`, `.jpeg`, `.pdf`, `.svg`, `.eps`.

---

## 6. Adding Titles, Labels, and Legends

### Setting Axis Titles and Labels

```python
ax.set_title('My Title')
ax.set_xlabel('X Label')
ax.set_ylabel('Y Label')
```

Each `Axes` object manages its own title and axis labels independently. This is
especially useful when working with multiple subplots.

---

### Example: Multiple Labeled Subplots

```python
fig, axes = plt.subplots(nrows=1, ncols=2, figsize=(8, 3))

axes[0].plot(x, y)
axes[0].set_title("y = x²")
axes[0].set_xlabel("x")
axes[0].set_ylabel("y")

axes[1].plot(x, np.sqrt(x))
axes[1].set_title("y = √x")
axes[1].set_xlabel("x")
axes[1].set_ylabel("y")

plt.tight_layout()
plt.show()
```

---

## 7. Adding Legends to Plots

Legends clarify which line represents which dataset.

### Example: Simple Legend

```python
ax.plot(x, x**2, label='x squared')
ax.plot(x, x**3, label='x cubed')
ax.legend()
```

### How It Works

- Each plot line receives a **label** via the `label` parameter.
- The `ax.legend()` call automatically gathers those labels and displays them.

---

### Customizing Legend Location

Use the `loc` parameter to control where the legend appears.

```python
ax.legend(loc=0)          # Best automatic placement
ax.legend(loc='upper left')
ax.legend(loc=(0.1, 0.1)) # Manual coordinates (fractional)
```

Common location codes:

| Code | Location     |
| ---- | ------------ |
| 0    | Best fit     |
| 1    | Upper right  |
| 2    | Upper left   |
| 3    | Lower left   |
| 4    | Lower right  |
| 5    | Right        |
| 6    | Center left  |
| 7    | Center right |
| 8    | Lower center |
| 9    | Upper center |
| 10   | Center       |

---

## 8. Complete Example — Putting It All Together

```python
import numpy as np
import matplotlib.pyplot as plt

x = np.linspace(0, 10, 100)
y1 = np.sin(x)
y2 = np.cos(x)

fig, axes = plt.subplots(nrows=2, ncols=1, figsize=(6, 6), dpi=120)

axes[0].plot(x, y1, label='sin(x)', color='blue')
axes[0].set_title('Sine Wave')
axes[0].legend(loc='upper right')

axes[1].plot(x, y2, label='cos(x)', color='orange')
axes[1].set_title('Cosine Wave')
axes[1].legend(loc='upper right')

for ax in axes:
    ax.set_xlabel('X-axis')
    ax.set_ylabel('Y-axis')

plt.tight_layout()
fig.savefig('trig_functions.png', dpi=150)
plt.show()
```

✅ Output:

- Two stacked plots: sine and cosine
- Each labeled with axes, titles, and legends
- Saved as `trig_functions.png`

---

## 9. Advanced Topics (Preview)

Coming up next, you’ll explore:

- **Line styles, colors, and markers** (`linestyle`, `linewidth`, `marker`,
  etc.)
- **Axis ranges and scaling**
- **Adding grids and annotations**
- **Specialized plot types** (scatter, histograms, bar charts, pie charts)

---

## 10. Key Takeaways

- Use `plt.subplots()` for structured subplot layouts.
- The returned `axes` can be indexed or looped through.
- Control figure **size** and **resolution** with `figsize` and `dpi`.
- Use `savefig()` to export figures in multiple formats.
- Add **titles, axis labels, and legends** for clarity.
- Adjust **legend locations** using `loc` codes or coordinate tuples.
- Always use `plt.tight_layout()` to ensure a neat layout.

---

## 11. Practice Questions

1. What is the main advantage of using `plt.subplots()` over `plt.figure()` with
   `add_axes()`?
2. How do you create a 2×2 grid of subplots?
3. What does `figsize` control? What about `dpi`?
4. How can you prevent overlapping labels when using multiple subplots?
5. What formats can `savefig()` export to?
6. How do you add titles and axis labels in the Object-Oriented approach?
7. Explain how to add legends to multiple lines on the same axis.
8. How can you specify a custom location for a legend?
9. What happens when you call `plt.tight_layout()`?
10. Write a code snippet to generate a 1×3 grid of subplots showing `x`, `x²`,
    and `x³`.

---

## 12. Answers

1. `plt.subplots()` automatically creates a grid of axes and manages layout,
   making it easier for multi-plot configurations.
2. `fig, axes = plt.subplots(nrows=2, ncols=2)`
3. `figsize` sets figure dimensions (in inches); `dpi` controls resolution (dots
   per inch).
4. Call `plt.tight_layout()` to automatically adjust spacing.
5. PNG, JPEG, SVG, PDF, EPS, etc.
6. Use `ax.set_title()`, `ax.set_xlabel()`, and `ax.set_ylabel()`.
7. Provide labels in `plot()` and call `ax.legend()`.
8. Use `ax.legend(loc='upper left')` or custom coordinates like
   `loc=(0.1, 0.1)`.
9. It optimizes subplot spacing to avoid overlaps.
10.

```python
import numpy as np
import matplotlib.pyplot as plt

x = np.linspace(0, 10, 100)
fig, axes = plt.subplots(1, 3, figsize=(10, 3))

axes[0].plot(x, x); axes[0].set_title('y = x')
axes[1].plot(x, x**2); axes[1].set_title('y = x²')
axes[2].plot(x, x**3); axes[2].set_title('y = x³')

plt.tight_layout()
plt.show()
```
